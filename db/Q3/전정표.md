## 3. 트랜잭션이 무엇이고, ACID 원칙에 대해 설명해 주세요.

트랜잭션은 데이터베이스 상태를 변화시키기 위해 수행되는 작업의 단위 또는 시퀀스이다. <br>
하나의 트랜잭션은 여러 데이터베이스 명령어들의 그룹이며, 이 그룹 내의 명령어들은 한 번에 모두 수행되어야(커밋) 하거나, 아니면 전혀 수행되지 않아야(롤백) 하는 하나의 작업을 의미한다. <br> 
이러한 특성은 데이터의 일관성과 무결성을 유지하는 데 필수적아다.

1. **Atomicity (원자성)**

원자성은 트랜잭션이 데이터베이스에 모두 적용되거나 전혀 적용되지 않아야 함을 의미한다. <br> 
즉, 트랜잭션 내의 모든 연산은 하나의 단위로 처리되어야 하며, 이 중 하나라도 실패하면 전체 트랜잭션이 취소(롤백)되어야 한다. <br> 
원자성은 시스템 오류나 다른 예외 상황이 발생해도 데이터의 일관성을 보장한다.

2. **Consistency (일관성)**

일관성은 트랜잭션이 완료된 후에 데이터베이스가 일관된 상태를 유지해야 함을 의미한다. <br>
이는 트랜잭션 실행 전과 후에 모든 데이터베이스 규칙, 제약 조건, 스키마 등이 지켜져야 한다는 것을 의미한다. <br>
즉, 트랜잭션은 항상 데이터베이스를 하나의 유효한 상태에서 다른 유효한 상태로 전환시켜야 한다.

3. **Isolation (독립성)**

독립성은 동시에 실행되는 트랜잭션들이 서로에게 영향을 주지 않아야 함을 의미한다. <br>
각 트랜잭션은 독립적으로 실행되며, 다른 트랜잭션의 중간 상태를 "볼" 수 없다. <br>
이 속성은 동시성 제어를 통해 구현되며, 다양한 격리 수준(Isolation Levels)을 통해 세밀한 제어가 가능하다. <br>
격리 수준을 낮추면 성능은 향상될 수 있지만, 동시성 관련 문제(예: 더티 리드, 논리적 잘못된 읽기 등)가 발생할 수 있다.

4. **Durability (영속성)**

영속성은 트랜잭션이 성공적으로 완료되면, 그 결과가 영구적으로 데이터베이스에 반영되어야 함을 의미한다. <br>
시스템 오류, 전원 손실, 기타 장애가 발생해도 한번 커밋된 트랜잭션은 데이터베이스에 안전하게 저장되어야 한다. <br>
이를 위해 데이터베이스 시스템은 일반적으로 로그 파일을 사용하여 트랜잭션 데이터를 지속적으로 기록한다.

<br>

### ACID 원칙 중, Durability를 DBMS는 어떻게 보장하나요?

1. **로깅과 Write-Ahead Logging (WAL)**

DBMS는 변경 사항(트랜잭션에 의한 모든 데이터베이스 수정 작업)을 로그 파일에 기록하는데, 이러한 로그에는 트랜잭션 시작, 데이터 수정 내역, 트랜잭션 커밋 등의 정보가 포함된다.

WAL는 트랜잭션이 데이터 파일에 변경 사항을 적용하기 전에, 해당 변경 사항을 로그 파일에 먼저 기록하는 방법이다. <br>
시스템 장애가 발생해도, 로그 파일을 사용하여 마지막 커밋된 트랜잭션 상태로 데이터베이스를 복구할 수 있다.

2. **체크포인트(Checkpoints)**

DBMS는 정기적으로 또는 특정 조건에서 체크포인트를 생성한다. <br> 
체크포인트는 특정 시점에서 데이터베이스의 상태를 나타내며, 이를 통해 시스템 장애 발생 시 로그 파일과 함께 빠르게 데이터베이스를 복구할 수 있다. <br>

3. 레플리케이션(Replication)
   
DBMS는 데이터의 복사본을 여러 서버에 분산하여 저장할 수 있다. <br>
이러한 데이터 레플리케이션은 주 서버에 문제가 발생했을 때, 복제본을 가진 다른 서버에서 데이터를 복구하고 서비스의 지속성을 보장하는 데 사용된다.

4. 직접 백업

정기적으로 DB의 상태를 백업하는 방법이다. 증분 백업, 차등 백업 등 다양한 백업 전략을 통해 데이터 손실 위험을 최소화할 수 있다.


1,2 번은 보통 RDBMS의 내부 매커니즘에 의해 자동으로 관리되는 기능이고, 3, 4번은 RDBMS에서 제공하는 기능이지만 구체적인 구성과 실행은 개발자, 관리자가 직접 해주어야한다.

<br>

### 트랜잭션을 사용해 본 경험이 있나요? 어떤 경우에 사용할 수 있나요?

한 작업 단위에 원자성을 부여해야할 때 사용한다. <br>
금액을 다른 계좌로 송금할 때 내 계좌에서 일정 금액을 빼고 상대 계죄에 해당 금액을 더해 주어야한다. <br>
이 2개의 과정은 모두 성공해야 의미있는 작업이며 이 작업 중 하나라도 실패한다면 모두 실패해야한다.

<br>

### 읽기에는 트랜잭션을 걸지 않아도 될까요?

해당 읽기 작업 동안 데이터베이스의 상태가 변경되지 않음을 보장해야할 때 읽기에도 트랜잭션을 걸어야한다.

1. **은행 잔고 조회 시**

금융 시스템에서 사용자의 계좌 잔액과 최근 거래 내역을 조회할 때, 해당 기간 동안 다른 트랜잭션이 데이터를 변경하지 않도록 보장해야 합니다.


2. **보고서 생성 시**

대규모 데이터베이스에서 복잡한 보고서를 생성할 때, 보고서의 데이터가 특정 시점의 스냅샷을 반영하도록 하기 위해 트랜잭션을 사용할 수 있다. <br>
이를 통해 보고서 생성 과정에서 데이터가 변경되는 것을 방지하고, 일관된 데이터를 기반으로 보고서를 작성할 수 있다.


3. **잔여 좌석 조회 시**

온라인 예약 시스템에서 사용 가능한 좌석 정보를 읽어오는 동안, 해당 좌석 정보가 변경되지 않도록 트랜잭션을 사용할 수 있다. <br>
이렇게 하여 읽기 작업 동안에도 다른 트랜잭션이 해당 데이터를 변경하지 못하도록 할 수 있다. 